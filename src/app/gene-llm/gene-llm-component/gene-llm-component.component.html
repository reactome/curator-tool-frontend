<h1 class="section_title">Use LLM to Annotate a Gene in Reactome</h1>

<!-- Args:
gene (str): _description_
model (_type_): _description_
fi_cutoff (float, optional): Default=0.8. Used to filter the pulled PPIs.
fdr_cutoff (float, optional): _description_. Defaults to 1.0E-2.
pathway_count (int, optional): _description_. Defaults to 8.
total_words (int, optional): _description_. Defaults to 300. -->

<!--Enter a gene-->
<div class="center">
    <div
        style="display: flex; margin: auto; align-items: center; justify-content: center; margin-top: 15px; margin-bottom: 5px;">
        <div class="gene_label">
            <label>Enter a gene:</label>
        </div>

        <div class="gene_input">
            <input type="text" style="height: 24px;" placeholder="TANC1" [value]="gene"
                (change)="onGeneChange(geneInput.value)" #geneInput matInput />
        </div>

        <div class="button_container">
            <button style="cursor: pointer;" matTooltip="Submit gene for processing" mat-icon-button
                (click)="queryGene()">
                <mat-icon>publish</mat-icon>
            </button>

            <button style="margin-left: 10px; cursor: pointer;" matTooltip="Edit Configurations"
                (click)="changeShowConfiguration()" mat-icon-button>
                <mat-icon>
                    settings
                </mat-icon>
            </button>
        </div>
    </div>
    <ng-container *ngIf="showConfiguration">
        <app-configuration-component [setGene]="gene"
            (getConfig)="setConfiguration($event)"></app-configuration-component>
    </ng-container>
    <br>
</div>

<mat-spinner *ngIf="during_query"></mat-spinner>

<section *ngIf="!during_query">
    <!--Show the content generated by LLM-->
    <div *ngIf="failure">
        <h4 class="title">Failure</h4>
        <p [innerHTML]="failure"></p>
    </div>

    <section *ngIf="content">
        <div style="display: flex">
            <mat-card class="example-card" appearance="outlined">
                <mat-card-header>
                    <mat-card-title>{{gene}}</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <!-- <p>{{resultData?.content}}</p> -->

                    <!-- <ng-container *ngFor="let e of tableData"> -->
                        <h4>{{tableData[0].summary}}</h4>

                        <app-abstract-summary-table ></app-abstract-summary-table>

                        <!-- <ng-container *ngFor="let data of tableData[0]">
                            <h4>{{data.ppi_genes}}</h4>
                            <h4>{{data.pmids}}</h4>
                        </ng-container> -->

                        <p>{{tableData[0].summary}}</p>
                </mat-card-content>
            </mat-card>
        </div>
    </section>

    <section *ngIf="annotated_pathway_content">
        <div>
            <br>
            <mat-divider></mat-divider>
            <h2 class="section_title">Annotated Pathways</h2>
            <p class="note">The query gene has been annotated in Reactome. Its annotation is sumarized below with a
                focus on its
                roles in reactions annotated in the pathway(s).
            </p>
            <h4 class="title">Summary</h4>
            <p class="note">The text is generated by LLM, which summarizes the annotated roles of the gene in the
                pathway(s).</p>
            <p [innerHTML]="annotated_pathway_content"></p>
        </div>

        <div *ngIf="details">
            <h4 class="title">Details</h4>
            <p class="note">The summary of individual pathways annotated for the gene in Reactome.</p>
            <p [innerHTML]="annotated_pathway_details"></p>
        </div>

    </section>

</section>