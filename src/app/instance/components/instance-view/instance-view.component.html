<app-bread-crumb [viewHistory]="viewHistory" (clickEvent)="changeTable($event)" *ngIf="needHistory">
</app-bread-crumb>
<ng-container *ngIf="showProgressSpinner">
  <mat-spinner class="spinner"></mat-spinner>
</ng-container>
<mat-toolbar class="toolbar" *ngIf="!showProgressSpinner && instance">
  <div *ngIf="instance" class="title ellipsis">
    <span class="shrinkable ellipsis" [ngClass]="{'deleted': isDeleted()}" [ngStyle]="{'color': isChanged() || isDeleted() ? 'red' : 'black'}">
      {{title}}</span>
    <span [cdkContextMenuTriggerFor]="qa_issues" class="span-menu-trigger" style="color: warn"
      [hidden]="instance.qaIssues !== undefined && instance.qaIssues.size > 0 ? '' : 'hidden'">
      <button mat-stroked-button color="warn" style="border: 1px;">QA Issues
      </button>
    </span>
    <div class="button-container">
      <button mat-icon-button color="primary" class="v-center" (click)="showReferrers()" matTooltip="Show Referrers">
        <mat-icon>list_alt</mat-icon>
      </button>
      <button mat-icon-button color="primary" class="v-center" (click)="showReferenceValueColumn()"
        matTooltip="Compare instance" [disabled]="!isComparable()">
        <mat-icon>compare</mat-icon>
      </button>
      <button mat-icon-button color="primary" class="v-center" (click)="delete()" matTooltip="Delete Instance">
        <mat-icon>delete</mat-icon>
      </button>
      <button mat-icon-button color="primary" class="v-center" (click)="upload()" matTooltip="Upload"
        [disabled]="!isUploadable()">
        <mat-icon>upload</mat-icon>
      </button>
      <button mat-icon-button color="primary" class="v-center" (click)="addBookmark()" matTooltip="Add Bookmark">
        <mat-icon>bookmark</mat-icon>
      </button>
      <!-- Hide buttons unless expanded -->
      <ng-container *ngIf="showSecondaryButtons">
        <button mat-icon-button color="primary" class="v-center" (click)="cloneInstance()" matTooltip="copy instance">
          <mat-icon>content_copy</mat-icon>
        </button>
        <button mat-icon-button color="primary" class="v-center" (click)="compareInstances()"
          matTooltip="compare two instances">
          <mat-icon>compare_arrows</mat-icon>
        </button>
      </ng-container>
      <button color="primary" mat-icon-button matTooltip="expand" class="v-center" (click)="showSecondaryButtons = !showSecondaryButtons">
        <mat-icon>more_horiz</mat-icon>
      </button>
    </div>
  </div>
</mat-toolbar>
<app-text-curation [embedded]="true" [instanceView]="this" style="height: var(--text-curation-height);"
  *ngIf="instance"></app-text-curation>
<app-instance-table style="overflow: scroll;" [instance]="instance" [referenceInstance]="dbInstance"
  (editedInstance)="updateTitle($event)" *ngIf="!showProgressSpinner && instance"
  [blockRouter]="blockRoute"></app-instance-table>
<ng-template #qa_issues>
  <qa-reports-action-menu [instance]="instance" (actionItem)="onQAReportAction($event)">
  </qa-reports-action-menu>
</ng-template>
<!--<iframe [src]="'https://reactome.github.io/PathwayBrowser/' + '453279' | safe" width="1980" height="1020" title="Diagram Editor"></iframe>-->